# =============================================================================
# ETHHOOK DIGITALOCEAN ALL-IN-ONE DROPLET CONFIGURATION
# =============================================================================
# Copy this to .env.production on your Droplet and fill in your actual values
#
# This setup runs EVERYTHING on a single Droplet:
# - PostgreSQL (in Docker container)
# - Redis (in Docker container)
# - All EthHook services
#
# Cost: $24/month (just the Droplet)
#
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL in Docker)
# =============================================================================
# PostgreSQL runs in a container on the same Droplet

# Database password (change this!)
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_SECURE_PASSWORD

# Connection URL for services
DATABASE_URL=postgresql://ethhook:${POSTGRES_PASSWORD}@postgres:5432/ethhook

DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5

# =============================================================================
# REDIS CONFIGURATION (Redis in Docker)
# =============================================================================
# Redis runs in a container on the same Droplet

# Redis password (change this!)
REDIS_PASSWORD=CHANGE_THIS_TO_A_SECURE_REDIS_PASSWORD

# Connection details (these stay the same - internal Docker network)
REDIS_HOST=redis
REDIS_PORT=6379

REDIS_POOL_SIZE=10

# =============================================================================
# ETHEREUM RPC PROVIDER
# =============================================================================
# Use Alchemy (recommended - 300M compute units/month free)
# Sign up at: https://www.alchemy.com/

# For DEMO/MVP: Use Sepolia testnet (free, safe)
ENVIRONMENT=development
ETHEREUM_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# For PRODUCTION: Use Ethereum mainnet
# ENVIRONMENT=production
# ETHEREUM_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# =============================================================================
# ADMIN API SECURITY
# =============================================================================
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_MIN_32_CHARS

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
WORKER_COUNT=50
RUST_LOG=info
ENVIRONMENT=production

# Optional: Grafana admin password
GRAFANA_PASSWORD=admin

# =============================================================================
# SETUP CHECKLIST
# =============================================================================
# ☐ 1. Create DigitalOcean account
# ☐ 2. Create Droplet (2vCPU, 4GB RAM - $24/month)
# ☐ 3. Sign up for Alchemy and get API key
# ☐ 4. Generate passwords:
#      - POSTGRES_PASSWORD: openssl rand -base64 32
#      - REDIS_PASSWORD: openssl rand -base64 32
#      - JWT_SECRET: openssl rand -base64 32
# ☐ 5. Fill in all values above
# ☐ 6. Copy this file to Droplet as .env.production
#
# Total cost: $24/month (just the Droplet!)
#
# NOTE: PostgreSQL and Redis run in Docker containers on the same Droplet.
# Data is persisted in Docker volumes. Set up backups! (see backup.sh script)
